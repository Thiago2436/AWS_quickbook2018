# https://hub.docker.com/_/influxdb
# https://www.influxdata.com/blog/running-influxdb-2-0-and-telegraf-using-docker/

# webui builtin in 2.x
http://54.213.213.111:8086/

docker network create monitoring --attachable

docker run --name grafana -p 8080:3000 --network monitoring --restart unless-stopped -id grafana/grafana:9.3.2

# Note: select query language Query Language ---> Flux

docker run --name influxdb -id --network monitoring --restart unless-stopped -p 8086:8086 \
      -v $PWD/influxdb/data:/var/lib/influxdb2 \
      -v $PWD/influxdb/config:/etc/influxdb2 \
      -e DOCKER_INFLUXDB_INIT_MODE=setup \
      -e DOCKER_INFLUXDB_INIT_USERNAME=cloudgeeks \
      -e DOCKER_INFLUXDB_INIT_PASSWORD=12345678 \
      -e DOCKER_INFLUXDB_INIT_ORG=cloudgeeks \
      -e DOCKER_INFLUXDB_INIT_BUCKET=telegraf \
      -e DOCKER_INFLUXDB_INIT_RETENTION=1w \
      -e DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=my-super-secret-auth-token \
      influxdb:2.6.0

############
# Connection
############
influx v1 shell
