https://www.youtube.com/watch?v=JmCn7k0PlV4&list=PLHq1uqvAteVtlgFkmOlIqWro3XP26y_oW&index=3


Choose between Redis® Helm Chart and Redis® Cluster Helm Chart
You can choose any of the two Redis® Helm charts for deploying a Redis® cluster. While Redis® Helm Chart will deploy a master-slave cluster using Redis® Sentinel, the Redis® Cluster Helm Chart will deploy a Redis® Cluster with sharding. The main features of each chart are the following:

https://github.com/bitnami/charts/tree/main/bitnami/redis-cluster

https://github.com/bitnami/charts/tree/main/bitnami/redis

helm repo list

helm repo update

helm repo add bitnami https://charts.bitnami.com/bitnami

#########
# Cluster
#########
helm dependency build
helm upgrade --install redis-cluster --namespace redis-cluster --create-namespace  ./ -f ./values.yaml --set volumePermissions.enabled=true,replica.replicaCount=3,auth.enabled=true,auth.password=admin,master.livenessProbe.enabled=true,persistence.size=10Gi

##########
# Sentinel
##########
helm dependency build
helm upgrade --install redis-sentinel --namespace redis-sentinel --create-namespace  ./ -f ./values.yaml --set volumePermissions.enabled=true,replica.replicaCount=3,auth.enabled=true,auth.password=admin,master.livenessProbe.enabled=true,master.persistence.size=10Gi,replica.persistence.size=10Gi

# Adding a new node to the cluster
helm upgrade redis-cluster --namespace redis --create-namespace --timeout 600s <release> --set "password=${REDIS_PASSWORD},cluster.nodes=7,cluster.update.addNodes=true,cluster.update.currentNumberOfNodes=6"  ./ -f ./values.yaml

# External Access
helm upgrade <release> --set "password=${REDIS_PASSWORD},cluster.externalAccess.enabled=true,cluster.externalAccess.service.type=LoadBalancer,cluster.externalAccess.service.loadBalancerIP[0]=<loadBalancerip-0>,cluster.externalAccess.service.loadBalancerIP[1]=<loadbalanacerip-1>,cluster.externalAccess.service.loadBalancerIP[2]=<loadbalancerip-2>,cluster.externalAccess.service.loadBalancerIP[3]=<loadbalancerip-3>,cluster.externalAccess.service.loadBalancerIP[4]=<loadbalancerip-4>,cluster.externalAccess.service.loadBalancerIP[5]=<loadbalancerip-5>,cluster.externalAccess.service.loadBalancerIP[6]=,cluster.nodes=7,cluster.init=false my-repo/redis-cluster

# Userful commands

redis-cli
info replication
keys *
